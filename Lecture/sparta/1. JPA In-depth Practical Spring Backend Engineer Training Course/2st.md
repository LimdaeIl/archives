# 2ì£¼ì°¨ ë°ì´í„°ë² ì´ìŠ¤ ë‹¤ë£¨ê¸° ğŸ”®



**[ìˆ˜ì—… ëª©í‘œ]**

- ì´ ì„¹ì…˜ì—ì„œëŠ” ë‚´ì¥í˜• H2 ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„¤ì¹˜í•˜ê³  ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤. H2 ë°ì´í„°ë² ì´ìŠ¤ì˜ ì£¼ìš” íŠ¹ì§•ê³¼ ì¥ì ì„ ì†Œê°œí•˜ë©°, ê°„ë‹¨í•œ ë°ì´í„°ë² ì´ìŠ¤ ìƒì„± ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.
- SQL ê¸°ë³¸ êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œí•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ì˜ ê¸°ë³¸ì´ ë˜ëŠ” SQL ë¬¸ë²•ì— ëŒ€í•œ ì´í•´ë¥¼ ë†’ì…ë‹ˆë‹¤.
- ë°ì´í„°ë² ì´ìŠ¤ ë“œë¼ì´ë²„ì˜ ì—­í• ê³¼ ì¤‘ìš”ì„±ì„ ì´í•´í•˜ê³ , ì ì ˆí•œ ë“œë¼ì´ë²„ ì„ íƒ ë° ì„¤ì • ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤. JDBC ë“œë¼ì´ë²„ë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ê°„ì˜ ì—°ê²°ì„ êµ¬ì„±í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¹ë‹ˆë‹¤.
- JDBCë¥¼ í†µí•´ Java ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ë°ì´í„°ë¥¼ ì§ì ‘ ë‹¤ë£¨ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤. Connection, Statement, ResultSet ê°ì²´ì˜ ì‚¬ìš©ë²•ì„ ë°°ìš°ë©°, ê°„ë‹¨í•œ CRUD ì‘ì—…ì„ ì‹¤ìŠµí•©ë‹ˆë‹¤.



## â­ 01. ì´ë²ˆ ì£¼ì— ë°°ìš¸ ê²ƒ
> ì´ ê°•ì˜ì˜ í•µì‹¬ì„ í•œ ì¤„ë¡œ ì •ë¦¬í•©ë‹ˆë‹¤.

### ë°ì´í„°ë² ì´ìŠ¤ ë‹¤ë£¨ê¸°
- ë°ì´í„°ë² ì´ìŠ¤ ìƒì„± `H2`
- ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë°ì´í„° ë‹¤ë£¨ê¸° `SQL`
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° `Driver`
- ë°ì´í„°ë² ì´ìŠ¤ ë°ì´í„°ë¥¼ ì™¸ë¶€ì—ì„œ ë‹¤ë£¨ê¸° `JDBC`



## ğŸ†• **02.** ë°ì´í„°ë² ì´ìŠ¤ ìƒì„± (H2)
> âœ”ï¸ ì´ ì„¹ì…˜ì—ì„œëŠ” ë‚´ì¥í˜• H2 ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„¤ì¹˜í•˜ê³  ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤. H2 ë°ì´í„°ë² ì´ìŠ¤ì˜ ì£¼ìš” íŠ¹ì§•ê³¼ ì¥ì ì„ ì†Œê°œí•˜ë©°, ê°„ë‹¨í•œ ë°ì´í„°ë² ì´ìŠ¤ ìƒì„± ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

### **DB(H2) ì‚¬ìš© ë°©ì‹ 3ê°€ì§€**

>ğŸ’¡ H2ëŠ” Server Mode, In-memory Mode, Embeded Modeë¼ëŠ” ì„¸ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![alt text](static/1.webp)

- **Server Mode**
    - ì§ì ‘ ì—”ì§„ì„ ì„¤ì¹˜í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ì‹.
    - ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ìƒê´€ ì—†ëŠ” ì™¸ë¶€ì—ì„œ DB ì—”ì§„ì´ êµ¬ë™ëœë‹¤.
    - ë°ì´í„°ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ ì™¸ë¶€ì— ì €ì¥ë˜ë¯€ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¢…ë£Œí•´ë„ ë°ì´í„°ê°€ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ”ë‹¤.
- **In-memory Mode**
    - ì—”ì§„ì„ ì„¤ì¹˜í•˜ì§€ ì•Šê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ë¶€ì˜ ì—”ì§„ì„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹.
        - `build.gradle`Â ë°Â `application.properties`Â ì„¤ì •ì„ í†µí•´ ì‹¤í–‰ ê°€ëŠ¥í•˜ë‹¤.
    - ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ë©´ DB ì—”ì§„ì´ í•¨ê»˜ ì‹¤í–‰ë˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¢…ë£Œí•˜ë©´ DB ì—”ì§„ì´ í•¨ê»˜ ì¢…ë£Œëœë‹¤.
    - ë°ì´í„°ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ **ë©”ëª¨ë¦¬**ì— ì €ì¥ë˜ê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¢…ë£Œí•˜ë©´ ë°ì´í„°ê°€ ì‚¬ë¼ì§„ë‹¤.
- **Embedded Mode**
    - ì—”ì§„ì„ ì„¤ì¹˜í•˜ì§€ ì•Šê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ë¶€ì˜ ì—”ì§„ì„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹.
        - `build.gradle`Â ë°Â `application.properties`Â ì„¤ì •ì„ í†µí•´ ì‹¤í–‰ ê°€ëŠ¥í•˜ë‹¤.
    - ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ë©´ DB ì—”ì§„ì´ í•¨ê»˜ ì‹¤í–‰ë˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¢…ë£Œí•˜ë©´ DB ì—”ì§„ì´ í•¨ê»˜ ì¢…ë£Œëœë‹¤.
    - ë°ì´í„°ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ **ì™¸ë¶€**ì— ì €ì¥ë˜ë¯€ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¢…ë£Œí•´ë„ ë°ì´í„°ê°€ ì‚¬ë¼ì§€ì§€ ì•ŠëŠ”ë‹¤.

| Mode | H2 ë‹¤ìš´ë¡œë“œ ì—¬ë¶€ | ì‹¤í–‰ ì£¼ì²´ | DB ì €ì¥ ìœ„ì¹˜ | ì‚¬ìš© ìš©ë„ |
| --- | --- | --- | --- | --- |
| Server Mode | O | ì™¸ë¶€ | ë¡œì»¬(íŒŒì¼ ì‹œìŠ¤í…œ) | ë°°í¬ ìš©ë„ |
| In-Memory Mode | X | ìŠ¤í”„ë§ | ë©”ëª¨ë¦¬ | í…ŒìŠ¤íŠ¸ ìš©ë„ |
| Embedded Mode | X | ìŠ¤í”„ë§ | ë¡œì»¬(íŒŒì¼ ì‹œìŠ¤í…œ) | ê°œë°œ ìš©ë„ |

### 1. Server Mode

- ì„œë²„ ëª¨ë“œëŠ” í˜„ì—…ì—ì„œ ì‚¬ìš©í•˜ëŠ” ëª¨ë“œë¡œ ì»´í“¨í„°ì— DB ì—”ì§„ì„ ì„¤ì¹˜í•˜ê³  ì—”ì§„ì„ êµ¬ë™í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.
- ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ DBê°€ ë¶„ë¦¬ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë™ì¼í•œ DBë¥¼ ì‚¬ìš©í•˜ê¸°ì— ì í•©í•©ë‹ˆë‹¤.
- H2 DBMSëŠ” ì•„ë˜ ê³µì‹ ì‚¬ì´íŠ¸ì—ì„œ ë‹¤ìš´ë¡œë“œ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
https://www.h2database.com/html/main.html

### 2. In-memory Mode

- ì¸ë©”ëª¨ë¦¬ ëª¨ë“œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— DB ì—”ì§„ì´ ë‚´ì¥ë˜ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ í•¨ê»˜ ì‹¤í–‰ë˜ê³  ì¢…ë£Œë˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.
- ë°ì´í„°ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë©”ëª¨ë¦¬ì— ì €ì¥ë˜ê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¢…ë£Œë˜ë©´ ëª¨ë“  ë°ì´í„°ê°€ ì‚¬ë¼ì§€ëŠ” íœ˜ë°œì„±ì˜ íŠ¹ì§•ì„ ê°–ê³  ìˆìŠµë‹ˆë‹¤.
- ì´ëŸ¬í•œ íŠ¹ì§•ìœ¼ë¡œ ì¸í•´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë“±ì—ì„œ ë§ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.
- ìŠ¤í”„ë§ë¶€íŠ¸ í”„ë¡œì íŠ¸ì—ì„œ H2ë¥¼ ì¸ë©”ëª¨ë¦¬ ëª¨ë“œë¡œ ì‚¬ìš©í•˜ë ¤ë©´Â `application.yml`Â ë˜ëŠ”Â `application.properties`ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.

```yml
# application.yml
spring:  
    datasource:    
        driver-class-name: org.h2.Driver
        url: jdbc:h2:mem:{DB ì´ë¦„}
        username: sa
        password:
```

```properties
# application.properties
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.url=jdbc:h2:mem:{DB ì´ë¦„}
spring.datasource.username=sa
spring.datasource.password=
```
datasourceì˜ urlì—ëŠ” ì¼ë°˜ì ìœ¼ë¡œ DB ì„œë²„ì˜ í˜¸ìŠ¤íŠ¸ì™€ í¬íŠ¸ ë²ˆí˜¸, DB ì´ë¦„ ë“±ì˜ ì ‘ì† ì •ë³´ë¥¼ ê¸°ì¬í•˜ëŠ”ë°, **H2ì—ì„œëŠ” ì—¬ê¸°ì—Â `mem`ì„ ê¸°ì¬í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ëŠ” ë©”ëª¨ë¦¬ ìì²´ì—ì„œ DBë¥¼ ì‚¬ìš©í•˜ê² ë‹¤ëŠ” ê²ƒì„ ì„ ì–¸í•©ë‹ˆë‹¤.**

### 3. Embedded Mode

- ì„ë² ë””ë“œ(ë‚´ì¥) ëª¨ë“œëŠ” ì¸ë©”ëª¨ë¦¬ ëª¨ë“œì™€ ë™ì¼í•˜ê²Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— DB ì—”ì§„ì´ ë‚´ì¥ë˜ì–´ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ í•¨ê»˜ ì‹¤í–‰ë˜ê³  ì¢…ë£Œë˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.
- ì¸ë©”ëª¨ë¦¬ ëª¨ë“œì™€ ë‹¤ë¥¸ ì ì€ ë°ì´í„°ë¥¼ ë¡œì»¬ì— ì €ì¥í•˜ê¸° ë•Œë¬¸ì— ë°ì´í„° íœ˜ë°œì—ì„œ ììœ ë¡­ë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ê°„ë‹¨í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©í•˜ê¸° ì¢‹ìŠµë‹ˆë‹¤.
- ìŠ¤í”„ë§ë¶€íŠ¸ í”„ë¡œì íŠ¸ì—ì„œ H2ë¥¼ ì„ë² ë””ë“œ ëª¨ë“œë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ urlì„ ì œì™¸í•˜ê³  ë™ì¼í•˜ê²Œ ì„¤ì •í•´ì£¼ë©´ ë©ë‹ˆë‹¤.

```yml
# application.yml
spring:
  datasource:
      driver-class-name: org.h2.Driver
      url: jdbc:h2:{DBê°€ ì €ì¥ë  ê²½ë¡œ}    
      username: sa    
      password:
```

```properties
# application.properties
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.url=jdbc:h2:{DBê°€ ì €ì¥ë  ê²½ë¡œ}
spring.datasource.username=sa
spring.datasource.password=
```
ìœ„ì˜ ì¸ë©”ëª¨ë¦¬ ëª¨ë“œì™€ ì°¨ì´ì ì´ë¼ë©´Â **`mem`ì´ ì‚¬ë¼ì§€ê³ Â `jdbc:h2:`ì´í›„ì— ë°”ë¡œ DBê°€ ì €ì¥ë  ê²½ë¡œë¥¼ ì…ë ¥í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.**



## 4. ì‹¤ìŠµí•˜ê¸°

ì´ë²ˆ í”„ë¡œì íŠ¸ëŠ” Embedded Mode ë¡œ H2 ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. test ë¼ëŠ” ì´ë¦„ì˜ DBë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•´ì£¼ë©´ ë©ë‹ˆë‹¤.

```yml
# application.yml
spring:
  datasource:
      driver-class-name: org.h2.Driver
      url: jdbc:h2:~/test
      username: sa
      password:
```

```properties
# application.properties
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.url=jdbc:h2:~/test
spring.datasource.username=sa
spring.datasource.password=
```
- ì´ì™€ ê°™ì´ ì„¤ì •í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ë©´ H2 ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ì€ ì‚¬ìš©ìì˜ í™ˆ ë””ë ‰í† ë¦¬ ì•„ë˜ì— **`test.mv.db` íŒŒì¼ë¡œ ì €ì¥**ë©ë‹ˆë‹¤.
    - ì—¬ê¸°ì„œ **`~`ëŠ” í˜„ì¬ ì‚¬ìš©ìì˜ í™ˆ ë””ë ‰í† ë¦¬**ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
- ìœˆë„ìš° í™˜ê²½ì—ì„œ í˜„ì¬ ì‚¬ìš©ìì˜ ì´ë¦„ì´ "user"ë¼ë©´ **ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼ì˜ ê²½ë¡œëŠ” `C:\Users\user\test.mv.db`ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¦¬ëˆ…ìŠ¤ë‚˜ macOS í™˜ê²½ì—ì„œëŠ” `/home/username/test.mv.db` ë˜ëŠ” `/Users/username/test.mv.db`ì˜ í˜•íƒœ**ë¡œ ë  ê²ƒì…ë‹ˆë‹¤.

![macOS ì˜ˆì‹œ](static/2.webp)

- ì´ íŒŒì¼ì„ ë³„ë„ë¡œ ì‚­ì œí•˜ì§€ ì•ŠëŠ” ì´ìƒ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤í–‰ ì—¬ë¶€ì™€ ê´€ê³„ ì—†ì´ ë°ì´í„°ê°€ ì‚¬ë¼ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
- ë¸Œë¼ìš°ì €ì—ì„œ H2 ì½˜ì†”ì— ì ‘ì†í•˜ëŠ” ë°©ë²•ì€ ì¸ë©”ëª¨ë¦¬ ëª¨ë“œì™€ ë™ì¼í•©ë‹ˆë‹¤.
- Driver Class, JDBC URL, User Name, Passwordë¥¼ ìœ„ì˜ ì„¤ì • ê·¸ëŒ€ë¡œ ì…ë ¥í•˜ë©´ ì ‘ì†ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![alt text](static/3.webp)

![alt text](static/4.webp)
- application ì„¤ì •ê³¼ ë™ì¼í•œ ì •ë³´ë¡œ H2 ì½˜ì†”ì— ì ‘ì†í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (Embedded Mode)

> ğŸ’¡ **In-memory Mode ë¥¼ ì‚¬ìš©í•˜ëŠ”ë° h2-console ë¡œ ë°ì´í„° ì¡°íšŒê°€ ì•ˆë¼ìš”!!**

- **Embedded Mode** ê°€ ì•„ë‹Œ **In-memory Mode** ë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ì€ë° h2-console ì—ì„œ ë°ì´í„° ì¡°íšŒê°€ ì•ˆë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- H2 ì½˜ì†”ì—ì„œ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ë•Œ ë°ì´í„°ê°€ ë³´ì´ì§€ ì•ŠëŠ” ë¬¸ì œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ìƒì„±í•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì™€ H2 ì½˜ì†”ì´ ì ‘ê·¼í•˜ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ê°€ ì„œë¡œ ë‹¤ë¥¼ ë•Œ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì´ ê²½ìš°, ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ H2 ì½˜ì†”ì´ ê°™ì€ ë°ì´í„°ë² ì´ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë„ë¡ in-memory mode ìƒíƒœì—ì„œ h2 ì„¤ì •ì„ ì•„ë˜ì™€ ê°™ì´ ë°”ê¿”ì¤ë‹ˆë‹¤
**`url: 'jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE'`**
- **DB_CLOSE_DELAY=-1**: ì´ ì˜µì…˜ì€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—´ë¦° ìƒíƒœë¡œ ìœ ì§€í•©ë‹ˆë‹¤. **`DB_CLOSE_DELAY`** ì„¤ì •ì€ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì–¸ì œ ë‹«íì§€ë¥¼ ì œì–´í•©ë‹ˆë‹¤. **`-1` ê°’**ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ë°ì´í„°ë² ì´ìŠ¤ê°€ ê³„ì† ì—´ë ¤ ìˆë„ë¡ í•©ë‹ˆë‹¤.
- **DB_CLOSE_ON_EXIT=FALSE**: ì´ ì˜µì…˜ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¢…ë£Œë  ë•Œ ë°ì´í„°ë² ì´ìŠ¤ì˜ ìë™ ì¢…ë£Œë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.



## ğŸ§‘â€ğŸ³ 03. ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë°ì´í„° ë‹¤ë£¨ê¸° (SQL)

> âœ”ï¸ SQL ê¸°ë³¸ êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œí•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ì˜ ê¸°ë³¸ì´ ë˜ëŠ” SQL ë¬¸ë²•ì— ëŒ€í•œ ì´í•´ë¥¼ ë†’ì…ë‹ˆë‹¤.


**ğŸ§‘â€ğŸ³Â ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë§ˆì¹˜ ìš”ë¦¬í•˜ëŠ” ê²ƒì²˜ëŸ¼ ìƒê°í•´ ë³¼ê¹Œìš”?** 

ì¬ë£Œ(ë°ì´í„°)ë¥¼ ë‹¤ë£¨ëŠ” ë°©ë²•ì„ ë°°ìš°ëŠ” ê²ƒì´ ì´ ê°•ì˜ì˜ ëª©í‘œì…ë‹ˆë‹¤. ì´ ê°•ì˜ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì˜ê²Œ ì°ê³ , ì¡°ë¦¬í•˜ë©°, ì„œë¹™í•˜ëŠ” ë°©ë²•(ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ)ì„ ë°°ì›Œë´…ì‹œë‹¤.

### **1. SQL ì…ë¬¸**

- **SQL ì†Œê°œ**: SQLì€ ë§ˆì¹˜ ì£¼ë°©ì˜ ìš”ë¦¬ì‚¬ì²˜ëŸ¼ ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œì„ ì¡°ì‘í•˜ëŠ” ë° ì‚¬ìš©í•˜ëŠ” íŠ¹ë³„í•œ ì–¸ì–´ì…ë‹ˆë‹¤.
- **SQLì˜ ì¢…ë¥˜**: ë§ˆì¹˜ ë ˆì‹œí”¼ ë¶ì²˜ëŸ¼, SQLì€ DDL(ë°ì´í„° ì •ì˜ ì–¸ì–´), DML(ë°ì´í„° ì¡°ì‘ ì–¸ì–´), DCL(ë°ì´í„° ì œì–´ ì–¸ì–´)ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.

### **2. ë°ì´í„° ì¡°ë¦¬ ì‹œì‘í•˜ê¸° (DDL)**

- **í…Œì´ë¸” ë§Œë“¤ê¸°**: **`CREATE TABLE`ë¡œ** ìƒˆë¡œìš´ ì¬ë£Œí•¨ì„ ë§ˆë ¨í•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤. ê° ì„±ë¶„ì˜ íŠ¹ì„±(ì—´ì˜ ë°ì´í„° íƒ€ì…ê³¼ ì†ì„±)ì„ ì–´ë–»ê²Œ ì •ì˜í• ê¹Œìš”?
- **í…Œì´ë¸” ê°œì¡°í•˜ê¸°**: **`ALTER TABLE`ë¡œ** ì´ë¯¸ ë§Œë“  ì¬ë£Œí•¨ì— ë³€í™”ë¥¼ ì£¼ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ì¬ë£Œë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ë¶ˆí•„ìš”í•œ ì¬ë£Œë¥¼ ì œê±°í•´ë´…ì‹œë‹¤.
- **í…Œì´ë¸” ì² ê±°í•˜ê¸°**: ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì¬ë£Œí•¨ë¥¼ **`DROP TABLE`ë¡œ** ì² ê±°í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

### **3. ë°ì´í„° ì°¾ê¸° (DML)**

- **ì¬ë£Œ ì„ íƒí•˜ê¸°**: **`SELECT`** ë¬¸ì„ ì‚¬ìš©í•´ í•„ìš”í•œ ì¬ë£Œ(ë°ì´í„°)ë¥¼ ì°¾ì•„ë³´ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤. **`WHERE`** ì ˆë¡œ íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì¬ë£Œë§Œ ê³¨ë¼ë´…ì‹œë‹¤.
- **ì •ë ¬í•˜ì—¬ ì§„ì—´í•˜ê¸°**: **`ORDER BY`ë¡œ** ì¬ë£Œë¥¼ ìˆœì„œëŒ€ë¡œ ì •ë ¬í•˜ê³ , **`GROUP BY`ë¡œ** ë¹„ìŠ·í•œ ì¬ë£Œë“¤ì„ ê·¸ë£¹í™”í•˜ì—¬ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤.
- **ì¬ë£Œ í•©ì¹˜ê¸°**: ì—¬ëŸ¬ ì¥ì†Œì—ì„œ ê°€ì ¸ì˜¨ ì¬ë£Œë¥¼ **`JOIN`ìœ¼ë¡œ** í•©ì¹˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤. ì¡°í™”ë¡­ê²Œ ì¬ë£Œë¥¼ ê²°í•©í•˜ì—¬ ë” ë§›ìˆëŠ” ìš”ë¦¬ë¥¼ ë§Œë“¤ì–´ ë´…ì‹œë‹¤.

### **4. ë°ì´í„° ì¡°ë¦¬ ë° ì œê±° (DML)**

- **ì¬ë£Œ ì¶”ê°€í•˜ê¸°**: **`INSERT INTO`ë¡œ** ìƒˆë¡œìš´ ì¬ë£Œë¥¼ ì¶”ê°€í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.
- **ì¬ë£Œ ì—…ë°ì´íŠ¸í•˜ê¸°**: **`UPDATE`ë¡œ** ê¸°ì¡´ì˜ ì¬ë£Œë¥¼ ìƒˆë¡œ ê³ ì¹˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.
- **ì¬ë£Œ ë²„ë¦¬ê¸°**: **`DELETE FROM`ìœ¼ë¡œ** ë¶ˆí•„ìš”í•œ ì¬ë£Œë¥¼ ì œê±°í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

### **5. íŠ¸ëœì­ì…˜ ì…ë¬¸**

- ë°ì´í„°ë² ì´ìŠ¤ì˜ ìƒíƒœë¥¼ ë³€í™”ì‹œí‚¤ê¸° ìœ„í•´ì„œ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ì˜ ë‹¨ìœ„ë¥¼ ë§í•©ë‹ˆë‹¤.
- ìš”ë¦¬ë¡œ ì¹˜ë©´ ì¡°ë¦¬ëŒ€ë¥¼ ì˜ë¯¸í•˜ë©° ì¬ë£Œ(ë°ì´í„°)ë“¤ì„ ì¡°íšŒí•˜ì—¬ ìƒì„±/ìˆ˜ì •/ì‚­ì œ í›„ ìµœì¢… ê²°ê³¼ë¬¼ì„ ë§Œë“¤ë•Œê¹Œì§€ í•˜ë‚˜ì˜ ì‘ì—…ì„ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ê´€ë¦¬ í•  ìˆ˜ ìˆìœ¼ë©°, **íŠ¸ëœì­ì…˜ì€ ì¡°ë¦¬(ë°ì´í„° ì²˜ë¦¬) ì¤‘ì— ë¬¸ì œê°€ ë°œìƒì‹œ ê·¸ì „ì— í–ˆë˜ ë³€ê²½ì„ ì–´ë– í•œ ì¼ë„ ì—†ì—ˆë˜ ê²ƒì²˜ëŸ¼ ëª¨ë‘ ë˜ëŒë¦½ë‹ˆë‹¤.**
    
![alt text](static/5.webp)
    
![alt text](static/6.webp)
    
- íŠ¸ëœì­ì…˜ì˜ 3ê°€ì§€ íŠ¹ì§• (ì›ìì„±, ì¼ê´€ì„±, ë…ë¦½ì„±)
1. **ì›ìì„± (All or Nothing)**
    1. íŠ¸ëœì­ì…˜ì´ ë°ì´í„°ë² ì´ìŠ¤ì— ëª¨ë‘ ë°˜ì˜ë˜ë˜ê°€, ì•„ë‹ˆë©´ ì „í˜€ ë°˜ì˜ë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. 
    2. Â íŠ¸ëœì­ì…˜ì€ ì‚¬ëŒì´ ì„¤ê³„í•œ ë…¼ë¦¬ì ì¸ ì‘ì—… ë‹¨ìœ„ë¡œì„œ, ì¼ì²˜ë¦¬ëŠ”Â ì‘ì—… ë‹¨ìœ„ ë³„ë¡œ ì´ë£¨ì–´ì ¸ì•¼ ì‚¬ëŒì´ ë‹¤ë£¨ëŠ”ë° ë¬´ë¦¬ê°€ ì—†ë‹¤.
    3. ë§Œì•½ íŠ¸ëœì­ì…˜ ë‹¨ìœ„ë¡œ ë°ì´í„°ê°€ ì²˜ë¦¬ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ì„¤ê³„í•œ ì‚¬ëŒì€ ë°ì´í„° ì²˜ë¦¬ ì‹œìŠ¤í…œì„ ì´í•´í•˜ê¸° í˜ë“¤ ë¿ë§Œ ì•„ë‹ˆë¼, ì˜¤ì‘ë™ í–ˆì„ì‹œ ì›ì¸ì„ ì°¾ê¸°ê°€ ë§¤ìš° í˜ë“¤ì–´ì§ˆê²ƒì´ë‹¤.Â 
2. **ì¼ê´€ì„± (Keeps Data Correct)**
    1. íŠ¸ëœì­ì…˜ì˜ ì‘ì—… ì²˜ë¦¬ ê²°ê³¼ê°€ í•­ìƒ ì¼ê´€ì„±ì´ ìˆì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.Â 
    2. íŠ¸ëœì­ì…˜ì´ ì§„í–‰ë˜ëŠ” ë™ì•ˆì— ë°ì´í„°ë² ì´ìŠ¤ê°€ ë³€ê²½ ë˜ë”ë¼ë„ ì—…ë°ì´íŠ¸ëœ ë°ì´í„°ë² ì´ìŠ¤ë¡œ íŠ¸ëœì­ì…˜ì´ ì§„í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì²˜ìŒì— íŠ¸ëœì­ì…˜ì„ ì§„í–‰ í•˜ê¸° ìœ„í•´ ì°¸ì¡°í•œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì§„í–‰ëœë‹¤.Â 
    3. ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ ê° ì‚¬ìš©ìëŠ” ì¼ê´€ì„± ìˆëŠ” ë°ì´í„°ë¥¼ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.Â 
3. **ë…ë¦½ì„± (Independent)**
    1. ë‘˜ ì´ìƒì˜ íŠ¸ëœì­ì…˜ì´ ë™ì‹œì— ì‹¤í–‰ë˜ê³  ìˆì„ ê²½ìš° ì–´ë–¤ í•˜ë‚˜ì˜Â íŠ¸ëœì­ì…˜ì´ë¼ë„,Â ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ì˜ ì—°ì‚°ì— ë¼ì–´ë“¤ ìˆ˜ ì—†ë‹¤ëŠ” ì ì„ ê°€ë¦¬í‚¨ë‹¤.

### **6. íŠ¸ëœì­ì…˜ ê´€ë¦¬ì™€ ë³´ì•ˆ (DCL)**

- **ì¡°ë¦¬ëŒ€ íŠ¸ëœì­ì…˜ ê´€ë¦¬**: **ì¡°ë¦¬ëŒ€**ì—ì„œì˜ ì‚¬ê³ (ë‹¤ë¥¸ ìš”ë¦¬ì¬ë£Œì™€ ì„ì´ê±°ë‚˜, ì˜ëª» ë²„ë ¤ì§€ëŠ”ê²ƒ)ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ **`BEGIN`**, **`COMMIT`**, **`ROLLBACK`ìœ¼ë¡œ** íŠ¸ëœì­ì…˜ì„ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤.
- **ì ‘ê·¼ ê¶Œí•œ ì„¤ì •í•˜ê¸°**: **`GRANT`ì™€ `REVOKE`ë¡œ** ëˆ„ê°€ ì£¼ë°©ì— ë“¤ì–´ì™€ì„œ ìš”ë¦¬ë¥¼ í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤.
- **`BEGIN` ì´ë€?**
    - `START TRANSACTION` ê³¼ ë™ì¼í•˜ë©° ìƒˆë¡œìš´ íŠ¸ëœì­ì…˜ì„ ìƒì„± ë° ì‹œì‘í•˜ëŠ” ì—°ì‚°ì´ë‹¤.
- **`COMMIT` ì´ë€?**
    - í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ëë‚¬ê³ , ë°ì´í„°ë² ì´ìŠ¤ê°€ ì¼ê´€ì„±ìˆëŠ” ìƒíƒœì— ìˆì„ ë•Œ, í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ì´ ëë‚¬ë‹¤ë¼ëŠ” ê²ƒì„ì•Œë ¤ì£¼ê¸°ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì—°ì‚°ì´ë‹¤. ì´ ì—°ì‚°ì„ ì‚¬ìš©í•˜ë©´ ìˆ˜í–‰í–ˆë˜ íŠ¸ëœì­ì…˜ì´ ë¡œê·¸ì—Â ì €ì¥ë˜ë©°, í›„ì— Rollback ì—°ì‚°ì„ ìˆ˜í–‰í–ˆì—ˆë˜ íŠ¸ëœì­ì…˜ë‹¨ìœ„ë¡œ í•˜ëŠ”ê²ƒì„ ë„ì™€ì¤€ë‹¤.
- **`ROLLBACK` ì´ë€?**
    - í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ê°€ ë¹„ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œë˜ì–´ íŠ¸ëœì­ì…˜ì˜ ì›ìì„±ì´ ê¹¨ì§„ê²½ìš°, íŠ¸ëœì­ì…˜ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ê±°ë‚˜, íŠ¸ëœì­ì…˜ì˜ ë¶€ë¶„ì ìœ¼ë¡œë§Œ ì—°ì‚°ëœ ê²°ê³¼ë¥¼ ë‹¤ì‹œ ì·¨ì†Œì‹œí‚¨ë‹¤.

### 7. ì¿¼ë¦¬ ì‹¤ìŠµí•˜ê¸°

![alt text](static/7.webp)

- DDL - í…Œì´ë¸” ìƒì„±/ì‚­ì œ
    
    ```sql
    CREATE TABLE users (id SERIAL, name VARCHAR(255));
    
    DROP TABLE users;
    ```
    
- DML - ë°ì´í„° ì¶”ê°€
    
    ```sql
    INSERT INTO users (name) VALUES (?)
    ```
    
- DML - ë°ì´í„° ì¡°íšŒ
    
    ```sql
    SELECT name FROM users WHERE id = ?
    ```
    
- DML - ë°ì´í„° ìˆ˜ì •
    
    ```sql
    UPDATE users SET name = ? WHERE id = ?
    ```
    
- DCL - íŠ¸ëœì­ì…˜ ì»¤ë°‹/ë¡¤ë°±
    
    ```sql
    COMMIT
    
    ROLLBACK
    ```
    

### 8. ë³µì¡í•œ ì¿¼ë¦¬ ì‹¤ìŠµí•˜ê¸°

**1. í…Œì´ë¸” í™•ì¥**

ê¸°ì¡´ í…Œì´ë¸”

```sql
CREATE TABLE users (
    id SERIAL,
    name VARCHAR(255)
);
```

ì»¬ëŸ¼ ì¶”ê°€

- **email**: ì‚¬ìš©ìì˜ ì´ë©”ì¼ ì£¼ì†Œ
- **created_at**: ê³„ì • ìƒì„± ë‚ ì§œ
- **status**: ê³„ì • ìƒíƒœ (í™œì„±/ë¹„í™œì„±)

```sql
ALTER TABLE users
ADD COLUMN email VARCHAR(255);

ALTER TABLE users
ADD COLUMN created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP;

ALTER TABLE users
ADD COLUMN status ENUM('active', 'inactive') DEFAULT 'active';

```

ì¶”ê°€ í…Œì´ë¸” ìƒì„±

- **orders**: ì‚¬ìš©ì ì£¼ë¬¸ ì •ë³´ ì €ì¥ í…Œì´ë¸”
- **products**: ìƒí’ˆ ì •ë³´ ì €ì¥ í…Œì´ë¸”

```sql
CREATE TABLE products (
    id SERIAL,
    name VARCHAR(255),
    price DECIMAL(10, 2),
    PRIMARY KEY (id)
);

CREATE TABLE orders (
    id SERIAL,
    user_id BIGINT,
    product_id BIGINT,
    quantity INT,
    order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

```

**2. ë°ì´í„° ì‚½ì…**

users í…Œì´ë¸”ì— ë°ì´í„° ì‚½ì…

```sql
INSERT INTO users (name, email, status) VALUES
('Alice', 'alice@example.com', 'active'),
('Bob', 'bob@example.com', 'inactive'),
('Charlie', 'charlie@example.com', 'active');

```

products í…Œì´ë¸”ì— ë°ì´í„° ì‚½ì…

```sql
INSERT INTO products (name, price) VALUES
('Laptop', 1000.00),
('Phone', 500.00),
('Tablet', 300.00);

```

orders í…Œì´ë¸”ì— ë°ì´í„° ì‚½ì…

```sql
INSERT INTO orders (user_id, product_id, quantity) VALUES
(1, 1, 1),
(1, 2, 2),
(2, 3, 1),
(3, 1, 3);

```

**3. ì¿¼ë¦¬ ì‹¤ìŠµ**

1. `WHERE` ì ˆ

- í™œì„± ìƒíƒœ(`active`)ì¸ ì‚¬ìš©ìë§Œ ì¡°íšŒ

```sql
SELECT * FROM users
WHERE status = 'active';

```

2. `JOIN`

- ì‚¬ìš©ìì™€ ì£¼ë¬¸ ë‚´ì—­ì„ í•¨ê»˜ ì¡°íšŒ

```sql
SELECT users.name, orders.id AS order_id, products.name AS product_name, orders.quantity, orders.order_date
FROM orders
JOIN users ON orders.user_id = users.id
JOIN products ON orders.product_id = products.id;

```

3. `GROUP BY`

- ì‚¬ìš©ìë³„ ì£¼ë¬¸ ê°œìˆ˜ ì§‘ê³„

```sql
SELECT users.name, COUNT(orders.id) AS total_orders
FROM orders
JOIN users ON orders.user_id = users.id
GROUP BY users.name;

```

4. `ORDER BY`

- ì‚¬ìš©ì ì´ë¦„ìœ¼ë¡œ ì •ë ¬í•˜ì—¬ ì¡°íšŒ

```sql
SELECT * FROM users
ORDER BY name;

```

- ì£¼ë¬¸ ë‚´ì—­ì„ ì£¼ë¬¸ ë‚ ì§œ ìˆœìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬í•˜ì—¬ ì¡°íšŒ

```sql
SELECT users.name, products.name AS product_name, orders.quantity, orders.order_date
FROM orders
JOIN users ON orders.user_id = users.id
JOIN products ON orders.product_id = products.id
ORDER BY orders.order_date DESC;

```

**4. ì‹¤ìŠµì„ ìœ„í•œ ë°ì´í„° ë¦¬ì…‹ (ì„ íƒì‚¬í•­)**

- ë°ì´í„° ì´ˆê¸°í™”ë¥¼ ì›í•  ê²½ìš°, ë‹¤ìŒ ì¿¼ë¦¬ë¡œ í…Œì´ë¸” ë‚´ìš©ì„ ì§€ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```sql
TRUNCATE TABLE orders;
TRUNCATE TABLE products;
TRUNCATE TABLE users;

```

**5. ì¶”ê°€ ì—°ìŠµ ë¬¸ì œ**

1. íŠ¹ì • ë‚ ì§œ ì´í›„ì— ìƒì„±ëœ ê³„ì •ì„ ê°€ì§„ ì‚¬ìš©ì ì¡°íšŒ

```sql
SELECT * FROM users
WHERE created_at > '2023-01-01';

```

2. ê° ì‚¬ìš©ìë³„ ì´ ì£¼ë¬¸ ê¸ˆì•¡ ì¡°íšŒ

```sql
SELECT users.name, SUM(products.price * orders.quantity) AS total_spent
FROM orders
JOIN users ON orders.user_id = users.id
JOIN products ON orders.product_id = products.id
GROUP BY users.name;

```

ì´ ìë£Œë¥¼ í†µí•´ MySQLì˜ ê¸°ë³¸ì ì¸ í…Œì´ë¸” ìƒì„±, ìˆ˜ì •, ë°ì´í„° ì‚½ì… ë° ë‹¤ì–‘í•œ ì¿¼ë¦¬ ì‘ì„±ì„ ì—°ìŠµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ìŠµì„ í†µí•´ SQL ì¿¼ë¦¬ì— ìµìˆ™í•´ì§€ê³  ë°ì´í„°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆê¸°ë¥¼ ë°”ëë‹ˆë‹¤.

## ğŸª› 04. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° (Driver)

> âœ”ï¸ ë°ì´í„°ë² ì´ìŠ¤ ë“œë¼ì´ë²„ì˜ ì—­í• ê³¼ ì¤‘ìš”ì„±ì„ ì´í•´í•˜ê³ , ì ì ˆí•œ ë“œë¼ì´ë²„ ì„ íƒ ë° ì„¤ì • ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤. JDBC ë“œë¼ì´ë²„ë¥¼ ì‚¬ìš©í•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ê°„ì˜ ì—°ê²°ì„ êµ¬ì„±í•˜ëŠ” ê³¼ì •ì„ ë‹¤ë£¹ë‹ˆë‹¤.

### **1. ë°ì´í„°ë² ì´ìŠ¤ Driver ì—­í•  ë° ì¢…ë¥˜**

- **ë“œë¼ì´ë²„ì˜ ì—­í• **: ë°ì´í„°ë² ì´ìŠ¤ ë“œë¼ì´ë²„ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ê°„ì˜ í†µì‹ ì„ ì¤‘ê°œí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ë§ˆì¹˜ ìš°ì²´ë¶€ê°€ í¸ì§€ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì²˜ëŸ¼, ë“œë¼ì´ë²„ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìš”ì²­ì„ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” ì–¸ì–´ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
- **ë“œë¼ì´ë²„ì˜ ì¢…ë¥˜**: ë‹¤ì–‘í•œ ë°ì´í„°ë² ì´ìŠ¤ ì‹œìŠ¤í…œë§ˆë‹¤ í˜¸í™˜ë˜ëŠ” ë“œë¼ì´ë²„ê°€ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Oracle, MySQL, PostgreSQL ë“± ê° ë°ì´í„°ë² ì´ìŠ¤ ì œí’ˆì— ë§ëŠ” íŠ¹ì • ë“œë¼ì´ë²„ê°€ í•„ìš”í•©ë‹ˆë‹¤.
    
![alt text](static/8.webp)

    

### 2. ë°ì´í„°ë² ì´ìŠ¤ Driver ë™ì‘ âœˆï¸

<aside>
ğŸ“Œ ë“œë¼ì´ë²„ì˜ ë™ì‘ ë°©ì‹ì€ ë§ˆì¹˜ í•­ê³µ êµí†µ ê´€ì œì‹œìŠ¤í…œâœˆï¸Â  ê³¼ ë¹„ìŠ·í•©ë‹ˆë‹¤. í•­ê³µê¸°ê°€ ëª©ì ì§€ì— ì•ˆì „í•˜ê²Œ ë„ì°©í•˜ê¸° ìœ„í•´ì„œëŠ” í†µì œíƒ‘ê³¼ì˜ ì§€ì†ì ì¸ ì†Œí†µì´ í•„ìš”í•©ë‹ˆë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ, ë°ì´í„°ë² ì´ìŠ¤ ë“œë¼ì´ë²„ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ê°„ì˜ ë°ì´í„° êµí™˜ì„ ì¡°ì ˆí•˜ê³  ê´€ë¦¬í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

</aside>

### **ë“œë¼ì´ë²„ì˜ ë™ì‘ ë°©ì‹**

1. **ì—°ê²° ì´ˆê¸°í™”**
    - **ìš”ì²­ ìˆ˜ì‹ **: ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì„ ì‹œì‘í•˜ê¸° ìœ„í•´ ë“œë¼ì´ë²„ì— ì—°ê²°ì„ ìš”ì²­í•©ë‹ˆë‹¤. ì´ëŠ” ë§ˆì¹˜ í•­ê³µí¸âœˆï¸Â ì´ ì´ë¥™ í—ˆê°€ë¥¼ ë°›ê¸° ìœ„í•´ ê´€ì œíƒ‘ì— ìš”ì²­í•˜ëŠ” ê²ƒê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤.
    - **ì—°ê²° ì„¤ì •**: ë“œë¼ì´ë²„ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ì— ë¡œê·¸ì¸í•˜ê³  í•„ìš”í•œ ì„¤ì •ì„ ìˆ˜í–‰í•˜ì—¬ ì—°ê²°ì„ ì™„ë£Œí•©ë‹ˆë‹¤. ì´ ê³¼ì •ì€ ë„¤íŠ¸ì›Œí¬ ì •ë³´, ì¸ì¦ ìê²© ì¦ëª… ë“±ì„ ì‚¬ìš©í•˜ì—¬ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.
2. **SQL ì „ì†¡ ë° ì‹¤í–‰**
    - **SQL ëª…ë ¹ ë³€í™˜**: ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°œì†¡ëœ SQL ëª…ë ¹ì„ ë°›ì€ ë“œë¼ì´ë²„ëŠ” í•´ë‹¹ ëª…ë ¹ì„ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” í˜•íƒœë¡œ ë³€í™˜í•©ë‹ˆë‹¤. ì´ëŠ” ì™¸êµ­ì–´ë¥¼ í˜„ì§€ ì–¸ì–´ë¡œ ë²ˆì—­í•˜ëŠ” í†µì—­ì‚¬ì˜ ì—­í• ê³¼ ê°™ìŠµë‹ˆë‹¤.
    - **ëª…ë ¹ ì²˜ë¦¬**: ë³€í™˜ëœ ëª…ë ¹ì€ ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ë¡œ ì „ì†¡ë˜ì–´ ì‹¤í–‰ë©ë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ëŠ” ì¿¼ë¦¬ë¥¼ ì²˜ë¦¬í•˜ê³ , ìš”êµ¬ëœ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê±°ë‚˜ ë°ì´í„°ì— ë³€í™”ë¥¼ ì¤ë‹ˆë‹¤.
3. **ê²°ê³¼ ì²˜ë¦¬**
    - **ê²°ê³¼ ìˆ˜ì‹ **: ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì‘ì—…ì˜ ê²°ê³¼ë¥¼ ë³´ë‚´ë©´, ë“œë¼ì´ë²„ëŠ” ì´ ê²°ê³¼ë¥¼ ë°›ì•„ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í•´ì„í•  ìˆ˜ ìˆëŠ” í˜•íƒœë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
    - **ê²°ê³¼ ì „ë‹¬**: ìµœì¢…ì ìœ¼ë¡œ, ë“œë¼ì´ë²„ëŠ” ì´ ê²°ê³¼ë¥¼ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì „ë‹¬í•©ë‹ˆë‹¤. ì´ëŠ” ê´€ì œíƒ‘ì´ í•­ê³µê¸°âœˆï¸ì— ì°©ë¥™ ì§€ì‹œë¥¼ ë‚´ë¦¬ëŠ” ê³¼ì •ê³¼ ìœ ì‚¬í•˜ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì´ ì •ë³´ë¥¼ ì‚¬ìš©ìì—ê²Œ í‘œì‹œí•˜ê±°ë‚˜ ë‹¤ìŒ ì‘ì—…ì„ ì§„í–‰í•©ë‹ˆë‹¤.
4. **ì—°ê²° ì¢…ë£Œ**
    - **ì—°ê²° í•´ì œ**: ì‘ì—…ì´ ì™„ë£Œë˜ë©´, ë“œë¼ì´ë²„ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ì™€ì˜ ì—°ê²°ì„ ì¢…ë£Œí•©ë‹ˆë‹¤. ì´ëŠ” ë¹„í–‰ì´ ëë‚œ í›„ í•­ê³µê¸°âœˆï¸ê°€ ê³µí•­ ê²Œì´íŠ¸ì— ë„í‚¹í•˜ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•˜ë©°, ìì›ì„ ì •ë¦¬í•˜ê³  ë‹¤ìŒ ì„¸ì…˜ì„ ìœ„í•´ ì‹œìŠ¤í…œì„ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

ğŸ’¡ **JDBC Driver Manager ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ê³  ìˆëŠ” ëŸ°íƒ€ì„ ì‹œì ì—**

- **Connection(ì—°ê²°)** ì„ ìƒì„±í•˜ì—¬ ì¿¼ë¦¬ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆëŠ” ìƒíƒœë¥¼ ë§Œë“¤ì–´ì£¼ê³ 
- **Statement(ìƒíƒœ)** ë¥¼ ìƒì„±í•˜ì—¬ ì¿¼ë¦¬ë¥¼ ìš”ì²­í•˜ê²Œ í•´ì£¼ê³ 
- **ResultSet(ê²°ê³¼ì…‹)** ì„ ìƒì„±í•´ ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ë°›ì•„ì˜¬ ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.

![alt text](static/9.webp)



## ğŸ® 05. ë°ì´í„°ë² ì´ìŠ¤ ë°ì´í„°ë¥¼ ì™¸ë¶€ì—ì„œ ë‹¤ë£¨ê¸° (JDBC)

> âœ”ï¸ JDBCë¥¼ í†µí•´ Java ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ë°ì´í„°ë¥¼ ì§ì ‘ ë‹¤ë£¨ëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤. Connection, Statement, ResultSet ê°ì²´ì˜ ì‚¬ìš©ë²•ì„ ë°°ìš°ë©°, ê°„ë‹¨í•œ CRUD ì‘ì—…ì„ ì‹¤ìŠµí•©ë‹ˆë‹¤.



### **1. Spring Boot ì˜ JDBC ë¼ì´ë¸ŒëŸ¬ë¦¬**

- **Spring Bootì™€ JDBC**: Spring BootëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì‰½ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆë„ë¡ ë‹¤ì–‘í•œ JDBC ë“œë¼ì´ë²„ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê°œë°œìëŠ” ë³µì¡í•œ ì„¤ì • ì—†ì´ ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ ì—°ê²°ì„ ì‰½ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **`spring-boot-starter-jdbc`ëŠ”** Spring Boot í”„ë¡œì íŠ¸ì—ì„œ JDBCë¥¼ í†µí•´ ë°ì´í„°ë² ì´ìŠ¤ì™€ ìƒí˜¸ì‘ìš©í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ìŠ¤íƒ€í„° íŒ¨í‚¤ì§€ì…ë‹ˆë‹¤.
    - ì´ ìŠ¤íƒ€í„° íŒ¨í‚¤ì§€ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë° í•„ìš”í•œ ì£¼ìš” ì˜ì¡´ì„±ê³¼ ìë™ êµ¬ì„± ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ ì—°ê²°ì„ ì‰½ê³  ë¹ ë¥´ê²Œ êµ¬ì„±í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ë¸Œë¦¿ì§€ ì—­í• ì„ í•©ë‹ˆë‹¤.
    - **ì£¼ìš” í¬í•¨ ë‚´ìš©**
        1. **JDBC API ì§€ì›**: JDBC APIë¥¼ í†µí•´ SQL ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ê³  ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        2. **DataSource êµ¬ì„±**: ë°ì´í„° ì†ŒìŠ¤ ì—°ê²°ì„ ìœ„í•œ ê¸°ë³¸ì ì¸ ì„¤ì •ì„ ìë™ìœ¼ë¡œ êµ¬ì„±í•©ë‹ˆë‹¤. ì´ëŠ” ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ê´€ë¦¬í•˜ëŠ” ë° í•„ìˆ˜ì ì¸ ìš”ì†Œì…ë‹ˆë‹¤.
        3. **JdbcTemplate**: **`JdbcTemplate`ì€** Springì˜ í•µì‹¬ í´ë˜ìŠ¤ ì¤‘ í•˜ë‚˜ë¡œ, JDBC ì‘ì—…ì˜ ë§ì€ ë²ˆê±°ë¡œì›€ì„ ì¤„ì—¬ ì¤ë‹ˆë‹¤. SQL ì¿¼ë¦¬ ì‹¤í–‰, ê²°ê³¼ ì„¸íŠ¸ ì²˜ë¦¬, ì˜ˆì™¸ ì²˜ë¦¬ ë“±ì„ ë‹¨ìˆœí™”í•©ë‹ˆë‹¤.
    - **ì£¼ìš” ì¥ì  ë‚´ìš©**
        1. **ê°„ì†Œí™”ëœ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°**: **`DataSource`** ì„¤ì •ê³¼ **`JdbcTemplate`** ì‚¬ìš©ì„ í†µí•´ ë³µì¡í•œ JDBC ì½”ë“œë¥¼ ê°„ì†Œí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        2. **ìë™ êµ¬ì„±**: Spring Bootì˜ ìë™ êµ¬ì„± ê¸°ëŠ¥ì€ ê°œë°œìê°€ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì— í•„ìš”í•œ ëŒ€ë¶€ë¶„ì˜ êµ¬ì„±ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.
        3. **íš¨ìœ¨ì ì¸ ì˜ˆì™¸ ì²˜ë¦¬**: Springì˜ **`DataAccessException`ì„** í†µí•´ JDBCì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ Springì˜ ì¼ê´€ëœ ì˜ˆì™¸ ì²´ê³„ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.



### **2. JDBC**

- **JDBC ë“œë¼ì´ë²„ë€?**: JDBC(Java Database Connectivity)ëŠ” ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” APIì…ë‹ˆë‹¤. JDBC ë“œë¼ì´ë²„ëŠ” ì´ APIë¥¼ êµ¬í˜„í•˜ì—¬, ìë°” ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ ê°„ì˜ ì—°ê²°ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.
- **JDBC ë“œë¼ì´ë²„ íƒ€ì…**: JDBC ë“œë¼ì´ë²„ëŠ” ë„¤ ê°€ì§€ ìœ í˜•(Type 1, 2, 3, 4)ì´ ìˆìœ¼ë©°, ê°ê°ì˜ íŠ¹ì§•ê³¼ ì‚¬ìš© í™˜ê²½ì— ë”°ë¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Type 4 ë“œë¼ì´ë²„(ìˆœìˆ˜ ìë°” ë“œë¼ì´ë²„)ê°€ ê°€ì¥ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.
- ë¬¸ì¥ ê·¸ëŒ€ë¡œ Java ì•±ê³¼ DB ë¥¼ ì—°ê²°ì‹œì¼œì£¼ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ê¸°ìˆ ì…ë‹ˆë‹¤.
- ê·¸ë ‡ê¸° ë•Œë¬¸ì— JPA ë„ ì´ ê¸°ìˆ ì„ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. âœ…
- JDBC Driver ëŠ” ì—¬ëŸ¬íƒ€ì…ì˜ DB ì™€ ì—°ê²°í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.
- **JDBC ì‹¤ìŠµ**
    - DriverManager ë¥¼ í†µí•´ì„œ Connection(ì—°ê²°) ì„ ìƒì„±í•˜ì—¬ ì¿¼ë¦¬ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆëŠ” ìƒíƒœë¥¼ ë§Œë“¤ì–´ì£¼ê³ 
    - Statement(ìƒíƒœ) ë¥¼ ìƒì„±í•˜ì—¬ ì¿¼ë¦¬ë¥¼ ìš”ì²­í•˜ê³ 
    - ResultSet(ê²°ê³¼ì…‹) ì„ ìƒì„±í•´ ì¿¼ë¦¬ ê²°ê³¼ë¥¼ ë°›ì•„ì˜µë‹ˆë‹¤.
    
![alt text](static/10.webp)
    
        
```java
// JdbcApplication.java

package com.thesun4sky.jdbc;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class JdbcApplication {

	public static void main(String[] args) throws SQLException {
		// ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìƒì„±
		SpringApplication.run(JdbcApplication.class, args);

		// ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì •ë³´
		String url = "jdbc:h2:mem:test"; 	// spring.datasource.url
		String username = "sa";				// spring.datasource.username

		// connection ì–»ì–´ì˜¤ê¸°
		try (Connection connection = DriverManager.getConnection(url, username, null)) {
			try {
				// í…Œì´ë¸” ìƒì„± (statement ìƒì„±)
				String creatSql = "CREATE TABLE USERS (id SERIAL, username varchar(255))";
				try (PreparedStatement statement = connection.prepareStatement(creatSql)) {
					statement.execute();
				}

				// ë°ì´í„° ì¶”ê°€ (statement ìƒì„±)
				String insertSql = "INSERT INTO USERS (username) VALUES ('teasun kim')";
				try (PreparedStatement statement = connection.prepareStatement(insertSql)) {
					statement.execute();
				}

				// ë°ì´í„° ì¡°íšŒ (statement ìƒì„± í›„ rs = resultSet ìˆ˜ì‹  & next() ì¡°íšŒ)
				String selectSql = "SELECT * FROM USERS";
				try (PreparedStatement statement = connection.prepareStatement(selectSql)) {
					var rs = statement.executeQuery();
					while (rs.next()) {
						System.out.printf("%d, %s", rs.getInt("id"), rs.getString("username"));
					}
				}
			} catch (SQLException e) {
				if (e.getMessage().equals("ERROR: relation \"account\" already exists")) {
					System.out.println("USERS í…Œì´ë¸”ì´ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤.");
				} else {
					throw new RuntimeException();
				}
			}
		}
	}
}

```
        
- PreparedStatement (ì¤€ë¹„ëœ ìƒíƒœ)
    - Statement ì™€ ë‹¤ë¥¸ì 
        - StatementëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë™ì‘ ë°©ì‹ì„ ê°€ì§‘ë‹ˆë‹¤.
            
![alt text](static/11.webp)


### PreparedStatement

- PreparedStatementëŠ” Statementë¥¼ ìƒì†í•˜ê³  ìˆëŠ” Interfaceì…ë‹ˆë‹¤.

![alt text](static/12.webp)

- StatementëŠ”Â Â executeQuery()Â ë‚˜Â executeUpdate()Â ë¥¼Â ì‹¤í–‰í•˜ëŠ”Â ì‹œì ì—Â íŒŒë¼ë¯¸í„°ë¡œÂ SQLë¬¸ì„Â ì „ë‹¬í•˜ëŠ”ë°,Â ì´Â ë•ŒÂ ì „ë‹¬ë˜ëŠ”Â SQLÂ ë¬¸ì€Â ì™„ì„±ëœÂ í˜•íƒœë¡œÂ í•œëˆˆì—Â ë¬´ìŠ¨Â SQLÂ ë¬¸ì¸ì§€Â íŒŒì•…í•˜ê¸°Â ì‰½ìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ,Â Statement ëŠ”Â SQLë¬¸ì„Â ìˆ˜í–‰í•˜ëŠ”Â ê³¼ì •ì—ì„œÂ êµ¬ë¬¸ ë¶„ì„ì„ ìˆ˜í–‰í•˜ê¸°Â ë•Œë¬¸ì—Â PreparedÂ Statementì—Â ë¹„í•´Â íš¨ìœ¨ì„±ì´Â ë–¨ì–´ì§„ë‹¤.

![alt text](static/13.webp)

- PreparedStatementëŠ” ë‚´ë¶€ì ìœ¼ë¡œ Statementì˜ 4ë‹¨ê³„(êµ¬ë¬¸ë¶„ì„, ì¹˜í™˜, ì‹¤í–‰, ì¸ì¶œ) ê³¼ì • ì¤‘ ì²« ë²ˆì§¸ parse ê³¼ì •ì˜ ê²°ê³¼ë¥¼ ìºì‹±í•˜ê³ , ë‚˜ë¨¸ì§€ 3ê°€ì§€ ë‹¨ê³„ë§Œ ê±°ì³ì„œ SQLë¬¸ì´ ì‹¤í–‰ë  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.
- ì¦‰, PreparedStatementë¥¼ ì‚¬ìš©í•˜ë©´ êµ¬ë¬¸ ë¶„ì„(parse)ì˜ ê²°ê³¼ë¥¼ ìºì‹±í•´ì„œ ê³¼ì •ì„ ìƒëµí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì„±ëŠ¥ì´ í–¥ìƒë©ë‹ˆë‹¤.



ğŸ’¡ **ë¶€ê°€ì ì¸ ì¥ì **

PreparedStatementê°€ ë³€ìˆ˜ ë¬¸ìì—´ ì¿¼ë¦¬ë¥¼ ì§‘ì–´ë„£ì–´ í•´í‚¹í•˜ëŠ” SQL Injection ë„ ë°©ì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.



### 3. JDBC Template (QueryMapper)

- JDBC ë¡œ ì§ì ‘ SQLì„ ì‘ì„±í–ˆì„ ë•Œì˜ ë¬¸ì œ
    - SQL ì¿¼ë¦¬ ìš”ì²­ ì‹œ ì¤‘ë³µ ì½”ë“œ ë°œìƒ
    - DBë³„ ì˜ˆì™¸ì— ëŒ€í•œ êµ¬ë¶„ ì—†ì´ Checked Exception (SQL Exception) ì²˜ë¦¬
    - Connection, Statement ë“±.. ìì› ê´€ë¦¬ë¥¼ ë”°ë¡œ í•´ì¤˜ì•¼í•¨
        - ìì› í•´ì œ ì•ˆí•´ì£¼ë©´ ë©”ëª¨ë¦¬ ê½‰ì°¨ì„œ ì„œë²„ê°€ ì£½ìŒ

- ì´ ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ì²˜ìŒìœ¼ë¡œ Persistence Framework ë“±ì¥!
    - Persistence Framework ëŠ” 2ê°€ì§€ê°€ ìˆë‹¤.
        - **SQL Mapper** : JDBC Template, MyBatis ğŸ‘ˆ ìš”ê²Œ ë¨¼ì €ë‚˜ì˜´
        - **ORM** : JPA, Hibernate
- **SQL Mapper (QueryMapper)**
    - SQL â†”Â Object
    - SQL ë¬¸ê³¼ ê°ì²´(Object)ì˜ í•„ë“œë¥¼ ë§¤í•‘í•˜ì—¬ ë°ì´í„°ë¥¼ ê°ì±„í™”

### JDBC Template (**RowMapper)**

- SQL Mapper ì²«ë²ˆì§¸ ì£¼ìë¡œ JDBCTemplate ì— **RowMapper** íƒ„ìƒ
    - ì¿¼ë¦¬ ìˆ˜í–‰ ê²°ê³¼ì™€ ê°ì±„ í•„ë“œ ë§¤í•‘
    - **RowMapper** ë¡œ ì‘ë‹µí•„ë“œ ë§¤í•‘ì½”ë“œ ì¬ì‚¬ìš©
    - Connection, Statement, ResultSet ë°˜ë³µì  ì²˜ë¦¬ ëŒ€ì‹  í•´ì¤Œ
    - ğŸ˜µâ€ğŸ’«Â But, ê²°ê³¼ê°’ì„ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì— ë§¤í•‘í•˜ëŠ”ë° ì—¬ì „íˆ ë§ì€ ì½”ë“œê°€ í•„ìš”í•¨

![alt text](static/14.webp)

JDBC Template ëŠ” JDBC Driver ë¥¼ ì¶”ìƒí™”í•˜ì—¬ ë™ì‘í•©ë‹ˆë‹¤. (dbcp = db connection pool)

### **4. JDBC Template ì‹¤ìŠµ**

1. **insertUser**: ìƒˆë¡œìš´ ì‚¬ìš©ìë¥¼ **`users`** í…Œì´ë¸”ì— ì¶”ê°€í•©ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ì´ë¦„ê³¼ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•©ë‹ˆë‹¤.
2. **findUserNameById**: ì£¼ì–´ì§„ IDì— í•´ë‹¹í•˜ëŠ” ì‚¬ìš©ìì˜ ì´ë¦„ì„ ì¡°íšŒí•©ë‹ˆë‹¤. **`queryForObject`** ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¨ì¼ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
3. **updateUser**: ì£¼ì–´ì§„ IDì˜ ì‚¬ìš©ì ì´ë¦„ì„ ìƒˆë¡œìš´ ì´ë¦„ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤. **`UPDATE`** SQL ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ IDì˜ ì‚¬ìš©ì ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
4. **deleteUser**: ì£¼ì–´ì§„ IDë¥¼ ê°€ì§„ ì‚¬ìš©ìë¥¼ **`users`** í…Œì´ë¸”ì—ì„œ ì‚­ì œí•©ë‹ˆë‹¤. **`DELETE`** SQL ëª…ë ¹ì„ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ IDì˜ ì‚¬ìš©ì ì •ë³´ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.

```java
// DataRepository.java
package com.thesun4sky.jdbc;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Repository;

@Repository
public class DataRepository {

	@Autowired
	private JdbcTemplate jdbcTemplate;

	// í…Œì´ë¸” ìƒì„±
	public void createTable() {
		jdbcTemplate.execute("CREATE TABLE IF NOT EXISTS users (id SERIAL, name VARCHAR(255))");
	}

	// ì‚¬ìš©ì ì¶”ê°€ (Create)
	public void insertUser(String name) {
		jdbcTemplate.update("INSERT INTO users (name) VALUES (?)", name);
	}

	// ì‚¬ìš©ì IDë¡œ ì´ë¦„ ì¡°íšŒ (Read)
	public String findUserNameById(Long id) {
		return jdbcTemplate.queryForObject(
			"SELECT name FROM users WHERE id = ?",
			new Object[]{id},
			String.class
		);
	}

	// ì‚¬ìš©ì ì´ë¦„ ë³€ê²½ (Update)
	public void updateUser(Long id, String newName) {
		jdbcTemplate.update("UPDATE users SET name = ? WHERE id = ?", newName, id);
	}

	// ì‚¬ìš©ì ì‚­ì œ (Delete)
	public void deleteUser(Long id) {
		jdbcTemplate.update("DELETE FROM users WHERE id = ?", id);
	}
}
```

```java
// JdbcApplication.java
package com.thesun4sky.jdbc;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class JdbcApplication {

	public static void main(String[] args) {
		// ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìƒì„±
		var context = SpringApplication.run(JdbcApplication.class, args);
		// ë°ì´í„° ì¡°íšŒ í´ë˜ìŠ¤ ë¹ˆ ì¡°íšŒ
		var repository = context.getBean(DataRepository.class);

		// í…Œì´ë¸” ìƒì„±
		repository.createTable();
		// ìœ ì €ì •ë³´ ì¶”ê°€
		repository.insertUser("Teasun Kim");
		// ìœ ì €ì •ë³´ ì¡°íšŒ
		System.out.println("User Name: " + repository.findUserNameById(1L));
	}
}
```

### **5. JDBC Template** **RowMapper ì‹¤ìŠµ**

- **RowMapper.mapRow** : RowMapper ë¥¼ ìƒì†ë°›ì•„ mapRow() ë©”ì„œë“œë¥¼ êµ¬í˜„í•˜ë©´ JDBCTemplate ì—ì„œ row ì‘ë‹µì„ mapRow() ë©”ì„œë“œì— rs íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ì£¼ì–´ ê°ì²´ì— ë§¤í•‘í•˜ê¸° ì‰½ë„ë¡ ë„ì™€ì¤€ë‹¤.
- **findUserById** : jdbcTemplate.queryForObject() ë©”ì„œë“œì—ì„œëŠ” ë‘ë²ˆì§¸ ì¸ìë¡œ **RowMapper** ë¥¼ ë„£ì–´ì¤„ ê²½ìš° í•´ë‹¹ **RowMapper** ì˜ **mapRow()** ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì‘ë‹µì„ í•˜ë„ë¡ ë™ì‘í•œë‹¤.

```java
// UserRowMapper.java
import java.sql.ResultSet;
import java.sql.SQLException;

import org.springframework.jdbc.core.RowMapper;


public class UserRowMapper implements RowMapper<User> {

	// JDBCTemplate ì—ì„œ row ì‘ë‹µì„ mapRow() ë©”ì„œë“œì— rs íŒŒë¼ë¯¸í„°ë¡œ ë„˜ê²¨ì£¼ì–´ ê°ì²´ì— ë§¤í•‘í•˜ê¸° ì‰½ë„ë¡ ë„ì™€ì¤€ë‹¤.
  @Override
  public User mapRow(ResultSet rs, int rowNum) throws SQLException {
    var user = new User();
    user.setId(rs.getInt("ID"));
    user.setName(rs.getString("NAME"));
    return user;
  }
}
```

```java
// ì‚¬ìš©ì IDë¡œ User ì¡°íšŒ (Read)
public User findUserById(Long id) {
	return jdbcTemplate.queryForObject(
		"SELECT * FROM users WHERE id = ?",
		new UserRowMapper(),  // ì´ìë¦¬ì— ë§¤í¼ë¥¼ ìƒì„±ìë¡œ ë„£ì–´ì£¼ë©´ ë¨
		id
	);
}
```