# 2. 불변 객체



## 기본형과 참조형의 공유

- **기본형(Primitive Type)**: 하나의 값을 여러 변수에서 절대로 공유하지 않는다.
- **참조형(Reference Type)**: 하나의 객체를 참조값을 통해 여러 변수에서 공유할 수 있다.



## 공유 참조와 사이드 이펙트

사이드 이펙트(Side effect)는 프로그래밍에서 어떤 계산이 주된 작업 이외 추가적인 부수 효과를 일으키는 것을 말한다.



**사이드 이펙트 해결 방안**

- 서로 다른 인스턴스를 참조하도록 한다. 즉, 새로운 인스턴스를 생성하면 된다.
- 여러 변수가 하나의 객체를 공유하는 것을 막을 방법은 없기 때문이다.



## 불변 객체 - 도입

객체의 값이 변경하는 것을 방지 하기 위해 불변 객체가 등장했다. 
객체를 공유한다는 것으로 사이드 이펙트가 발생하지 않지만, 공유된 객체의 값을 변경하는 것에서 발생한다.



**불변 객체 도입** 

객체의 상태(객체 내부의 값, 필드, 멤버 변수)가 변하지 않는 객체를 불변 객체(Immutable Ojbect)라고 한다. 
오직 클래스는 생성자를 통해서만 값을 설정할 수 있고, 이후에는 값을 변경하는 것이 불가능하다.

- 내부 값의 변경을 막기 위해 필드에 `final`로 선언
- 내부 값을 변경할 수 있는 메서드 `setXXX()`를 제거

클래스를 불변으로 설계하는 이유는 다음과 같다.

1. 캐시 안정성
2. 멀티 쓰레드 안전성
3. 엔티티의 값 타입

